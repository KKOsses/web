<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡πá‡∏Å‡πÄ‡∏•‡πá‡∏Å</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&display=swap');
        
        body {
            font-family: 'Sarabun', sans-serif;
        }
        
        .card-flip {
            perspective: 1000px;
            width: 100%;
            height: 400px;
        }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }
        
        .card-flip.flipped .card-inner {
            transform: rotateY(180deg);
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .card-back {
            transform: rotateY(180deg);
        }
        
        .task-item {
            transition: all 0.3s ease;
        }
        
        .task-item:hover {
            transform: translateY(-2px);
        }
        
        .completed {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        
        .jigsaw-piece {
            display: inline-block;
            margin: 2px;
            font-size: 24px;
            animation: bounce 0.5s ease-in-out;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        
        .celebration {
            animation: celebrate 1s ease-in-out;
        }
        
        @keyframes celebrate {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-purple-400 via-pink-500 to-red-500 p-4">
    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-white mb-2">üéØ ‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</h1>
            <p class="text-white/80">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏û‡∏•‡∏¥‡∏Å‡∏î‡∏π‡∏á‡∏≤‡∏ô!</p>
        </div>

        <!-- Main Card -->
        <div class="card-flip" id="mainCard">
            <div class="card-inner">
                <!-- Front Side -->
                <div class="card-front bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center cursor-pointer" onclick="flipCard()">
                    <div class="text-center text-white">
                        <div class="text-6xl mb-4">üìã</div>
                        <h2 class="text-3xl font-bold mb-2">‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</h2>
                        <p class="text-xl opacity-90">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô</p>
                        <div class="mt-4 text-sm opacity-75">
                            <div class="animate-bounce">üëÜ ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</div>
                        </div>
                    </div>
                </div>

                <!-- Back Side -->
                <div class="card-back bg-white p-6">
                    <div class="h-full flex flex-col">
                        <!-- Header -->
                        <div class="mb-6">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-2xl font-bold text-gray-800">‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</h3>
                                <div class="flex gap-2">
                                    <button onclick="resetAll()" class="text-red-500 hover:text-red-700 text-sm">
                                        üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                                    </button>
                                    <button onclick="flipCard()" class="text-blue-500 hover:text-blue-700 text-sm">
                                        üîÑ ‡∏û‡∏•‡∏¥‡∏Å‡∏Å‡∏•‡∏±‡∏ö
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Current Task Display -->
                        <div class="flex-1 flex flex-col items-center justify-center mb-6">
                            <div class="text-center mb-8">
                                <div class="text-6xl mb-4" id="currentTaskIcon">üéØ</div>
                                <h4 class="text-xl font-bold text-gray-800 mb-2">‡∏á‡∏≤‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</h4>
                                <div class="bg-gradient-to-r from-blue-100 to-purple-100 p-6 rounded-xl border-2 border-blue-200 mb-4">
                                    <div class="text-3xl mb-2" id="taskEmoji">üé≤</div>
                                    <div class="text-lg font-medium text-gray-800" id="currentTaskText">
                                        ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏∏‡πà‡∏°‡∏á‡∏≤‡∏ô...
                                    </div>
                                </div>
                                
                                <!-- Accuracy Display -->
                                <div class="mb-4 p-3 bg-green-50 rounded-lg border-2 border-green-200" id="accuracyDisplay" style="display: none;">
                                    <div class="text-sm font-medium text-green-700">
                                        ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥: <span id="accuracyValue">100</span>%
                                    </div>
                                </div>
                                
                                <div class="space-y-3">
                                    <button onclick="openPracticeLink()" id="practiceBtn" class="bg-blue-500 text-white px-8 py-3 rounded-lg hover:bg-blue-600 transition-colors text-lg font-medium" style="display: none;">
                                        üîó ‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ù‡∏∂‡∏Å‡∏û‡∏¥‡∏°‡∏û‡πå
                                    </button>
                                    
                                    <button onclick="completeCurrentTask()" id="completeBtn" class="bg-green-500 text-white px-8 py-3 rounded-lg hover:bg-green-600 transition-colors text-lg font-medium" style="display: none;">
                                        ‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
                                    </button>
                                    
                                    <button onclick="randomTask()" id="nextTaskBtn" class="bg-gradient-to-r from-blue-500 to-purple-500 text-white px-8 py-3 rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all text-lg font-medium" style="display: none;">
                                        üé≤ ‡∏á‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Stats -->
                        <div class="mb-4 p-4 bg-gray-50 rounded-lg">
                            <div class="grid grid-cols-3 gap-4 text-center">
                                <div>
                                    <div class="text-sm text-gray-600 mb-1">‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÅ‡∏•‡πâ‡∏ß</div>
                                    <div class="text-xl font-bold text-blue-600" id="completedCount">0</div>
                                </div>
                                <div>
                                    <div class="text-sm text-gray-600 mb-1">‡∏à‡∏¥‡πä‡∏Å‡∏ã‡∏≠‡∏ß‡πå‡∏™‡∏∞‡∏™‡∏°</div>
                                    <div class="text-xl font-bold text-green-600" id="totalJigsawCount">0</div>
                                </div>
                                <div>
                                    <div class="text-sm text-gray-600 mb-1">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠</div>
                                    <div class="text-xl font-bold text-orange-600" id="timeRemaining">60:00</div>
                                </div>
                            </div>
                            <div class="mt-3 text-center">
                                <div class="text-xs text-gray-500">‡∏ó‡∏≥ 3, 6, 9 ‡∏á‡∏≤‡∏ô = ‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå 10 ‡πÉ‡∏ö!</div>
                                <div class="w-full bg-gray-200 rounded-full h-2 mt-1">
                                    <div class="bg-gradient-to-r from-green-400 to-blue-500 h-2 rounded-full transition-all duration-300" id="hourlyProgress" style="width: 0%"></div>
                                </div>
                                <div class="text-xs text-purple-600 mt-1" id="nextMilestone">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏±‡∏î‡πÑ‡∏õ: 3 ‡∏á‡∏≤‡∏ô</div>
                            </div>
                        </div>

                        <!-- Reward Section -->
                        <div class="space-y-3">
                            <div class="bg-gradient-to-r from-yellow-100 to-orange-100 p-4 rounded-lg border-2 border-yellow-300">
                                <div class="text-center">
                                    <h4 class="font-bold text-gray-800 mb-2">üèÜ ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏à‡∏¥‡πä‡∏Å‡∏ã‡∏≠‡∏ß‡πå</h4>
                                    <div id="rewardDisplay" class="text-2xl mb-2">
                                        ‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à...
                                    </div>
                                    <div class="text-sm text-gray-600">
                                        ‚Ä¢ 100% = 5 ‡∏à‡∏¥‡πä‡∏Å‡∏ã‡∏≠‡∏ß‡πå | ‚Ä¢ 90% = 4 ‡∏à‡∏¥‡πä‡∏Å‡∏ã‡∏≠‡∏ß‡πå<br>
                                        ‚Ä¢ 80% = 3 ‡∏à‡∏¥‡πä‡∏Å‡∏ã‡∏≠‡∏ß‡πå | ‚Ä¢ ‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤ 80% = 2 ‡∏à‡∏¥‡πä‡∏Å‡∏ã‡∏≠‡∏ß‡πå
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-gradient-to-r from-pink-100 to-purple-100 p-4 rounded-lg border-2 border-pink-300" id="bonusRewardSection">
                                <div class="text-center">
                                    <h4 class="font-bold text-gray-800 mb-2">üéÅ ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå</h4>
                                    <div id="bonusRewardDisplay" class="text-xl mb-2">
                                        <div id="stickerCount">0</div>
                                        <div class="text-sm">‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö</div>
                                    </div>
                                    <div class="text-sm text-gray-600">
                                        ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏ö 3, 6, 9 ‡∏á‡∏≤‡∏ô = +10 ‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Celebration Modal -->
        <div id="celebrationModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
            <div class="bg-white p-8 rounded-2xl max-w-md mx-4 text-center celebration">
                <div class="text-6xl mb-4">üéâ</div>
                <h3 class="text-2xl font-bold text-gray-800 mb-4">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢!</h3>
                <p class="text-gray-600 mb-6">‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Ñ‡∏£‡∏ö‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏•‡πâ‡∏ß!</p>
                <div id="finalReward" class="text-3xl mb-6"></div>
                <button onclick="closeCelebration()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all">
                    ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡πÄ‡∏•‡∏¢! üéä
                </button>
            </div>
        </div>
    </div>

    <script>
        let completedTasks = 0;
        let isFlipped = false;
        let currentTask = null;
        let startTime = Date.now();
        let timeRemaining = 3600; // 60 minutes in seconds
        let timerInterval = null;
        let totalStickers = 0;
        let totalJigsaws = 0;
        let milestones = [3, 6, 9];
        let currentMilestoneIndex = 0;
        
        const tasks = [
            { id: 1, emoji: 'üé®', text: '‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏™‡∏µ‡πÄ‡∏™‡∏£‡πá‡∏à 1 ‡∏£‡∏π‡∏õ', accuracy: 100 },
            { id: 2, emoji: 'üáπüá≠', text: '‡∏ù‡∏∂‡∏Å‡∏û‡∏¥‡∏°‡∏û‡πå‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÑ‡∏ó‡∏¢ 30 ‡∏ï‡∏±‡∏ß', accuracy: 85 },
            { id: 3, emoji: 'üá∫üá∏', text: '‡∏ù‡∏∂‡∏Å‡∏û‡∏¥‡∏°‡∏û‡πå‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© 20 ‡∏ï‡∏±‡∏ß', accuracy: 90 },
            { id: 4, emoji: 'üìù', text: '‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå 5 ‡∏Ñ‡∏≥', accuracy: 95 }
        ];

        function flipCard() {
            const card = document.getElementById('mainCard');
            card.classList.toggle('flipped');
            isFlipped = !isFlipped;
            
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏∏‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
            if (isFlipped && !timerInterval) {
                startTimer();
                setTimeout(() => {
                    randomTask();
                }, 500); // ‡∏´‡∏ô‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏û‡∏•‡∏¥‡∏Å‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Å‡πà‡∏≠‡∏ô
            }
        }
        
        function startTimer() {
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimeDisplay();
                updateProgress();
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    checkBonusReward();
                }
            }, 1000);
        }
        
        function updateTimeDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeRemaining').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function updateProgress() {
            const nextMilestone = milestones[currentMilestoneIndex] || 9;
            const progress = (completedTasks / nextMilestone) * 100;
            document.getElementById('hourlyProgress').style.width = Math.min(progress, 100) + '%';
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
            if (currentMilestoneIndex < milestones.length) {
                document.getElementById('nextMilestone').textContent = 
                    `‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏±‡∏î‡πÑ‡∏õ: ${nextMilestone} ‡∏á‡∏≤‡∏ô`;
            } else {
                document.getElementById('nextMilestone').textContent = '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î!';
            }
        }

        function randomTask() {
            // ‡∏™‡∏∏‡πà‡∏°‡∏á‡∏≤‡∏ô‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
            const randomIndex = Math.floor(Math.random() * tasks.length);
            currentTask = tasks[randomIndex];
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI
            document.getElementById('taskEmoji').textContent = currentTask.emoji;
            document.getElementById('currentTaskText').textContent = currentTask.text;
            document.getElementById('accuracyValue').textContent = currentTask.accuracy;
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥
            document.getElementById('accuracyDisplay').style.display = 'block';
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏á‡∏≤‡∏ô‡∏ù‡∏∂‡∏Å‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            const isTypingTask = currentTask.text.includes('‡∏ù‡∏∂‡∏Å‡∏û‡∏¥‡∏°‡∏û‡πå');
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏≤‡∏ô
            if (isTypingTask) {
                document.getElementById('practiceBtn').style.display = 'inline-block';
            } else {
                document.getElementById('practiceBtn').style.display = 'none';
            }
            
            document.getElementById('completeBtn').style.display = 'inline-block';
            document.getElementById('nextTaskBtn').style.display = 'none';
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå
            document.getElementById('taskEmoji').style.animation = 'bounce 0.5s ease-in-out';
            setTimeout(() => {
                document.getElementById('taskEmoji').style.animation = '';
            }, 500);
        }
        
        function openPracticeLink() {
            if (!currentTask) return;
            
            let url = '';
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏≤‡∏ô‡∏ù‡∏∂‡∏Å‡∏û‡∏¥‡∏°‡∏û‡πå
            if (currentTask.text.includes('‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå')) {
                url = 'https://kkosses.github.io/web/sits/ex002.html';
            } else if (currentTask.text.includes('‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÑ‡∏ó‡∏¢') || currentTask.text.includes('‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©')) {
                url = 'https://kkosses.github.io/web/sits/ex003.html';
            }
            
            if (url) {
                window.open(url, '_blank');
            }
        }

        function completeCurrentTask() {
            if (!currentTask) return;
            
            completedTasks++;
            document.getElementById('completedCount').textContent = completedTasks;
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
            const jigsawCount = calculateJigsawReward(currentTask.accuracy);
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
            displayTaskReward(jigsawCount);
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤
            updateProgress();
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå
            checkStickerReward();
            
            // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏õ‡∏∏‡πà‡∏°
            document.getElementById('completeBtn').style.display = 'none';
            document.getElementById('nextTaskBtn').style.display = 'inline-block';
        }
        
        function checkStickerReward() {
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ñ‡∏∂‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            if (currentMilestoneIndex < milestones.length && 
                completedTasks === milestones[currentMilestoneIndex]) {
                
                // ‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå 10 ‡πÉ‡∏ö
                totalStickers += 10;
                updateStickerDisplay();
                showStickerCelebration(milestones[currentMilestoneIndex]);
                
                // ‡πÑ‡∏õ‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
                currentMilestoneIndex++;
            }
        }
        
        function updateStickerDisplay() {
            document.getElementById('stickerCount').textContent = totalStickers;
        }
        
        function showStickerCelebration(milestone) {
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            modal.innerHTML = `
                <div class="bg-white p-8 rounded-2xl max-w-md mx-4 text-center celebration">
                    <div class="text-6xl mb-4">üéä</div>
                    <h3 class="text-2xl font-bold text-purple-600 mb-4">‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå!</h3>
                    <p class="text-gray-600 mb-4">‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Ñ‡∏£‡∏ö ${milestone} ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!</p>
                    <div class="text-4xl mb-4">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê<br>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                    <div class="text-xl font-bold text-purple-600 mb-6">‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå 10 ‡πÉ‡∏ö!</div>
                    <div class="text-lg text-gray-600 mb-4">‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${totalStickers} ‡∏™‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏Å‡∏≠‡∏£‡πå</div>
                    <button onclick="this.parentElement.parentElement.remove()" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg hover:from-purple-600 hover:to-pink-600 transition-all">
                        ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å! üåü
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function calculateJigsawReward(accuracy) {
            if (accuracy >= 100) return 5;
            if (accuracy >= 90) return 4;
            if (accuracy >= 80) return 3;
            return 2;
        }

        function displayTaskReward(count) {
            let jigsawPieces = '';
            for (let i = 0; i < count; i++) {
                jigsawPieces += 'üß©';
            }
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏¥‡πä‡∏Å‡∏ã‡∏≠‡∏ß‡πå‡∏™‡∏∞‡∏™‡∏°
            totalJigsaws += count;
            document.getElementById('totalJigsawCount').textContent = totalJigsaws;
            
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
            document.getElementById('rewardDisplay').innerHTML = 
                `<div class="celebration">${jigsawPieces}<br><span class="text-lg font-bold text-green-600">‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö ${count} ‡∏à‡∏¥‡πä‡∏Å‡∏ã‡∏≠‡∏ß‡πå!</span><br><span class="text-sm text-gray-600">‡∏£‡∏ß‡∏°: ${totalJigsaws} ‡∏à‡∏¥‡πä‡∏Å‡∏ã‡∏≠‡∏ß‡πå</span></div>`;
        }

        function resetForNextTask() {
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï UI
            document.getElementById('taskEmoji').textContent = 'üé≤';
            document.getElementById('currentTaskText').textContent = '‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏á‡∏≤‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà';
            document.getElementById('accuracyDisplay').style.display = 'none';
            
            currentTask = null;
        }

        function showCelebration() {
            document.getElementById('celebrationModal').classList.remove('hidden');
            document.getElementById('celebrationModal').classList.add('flex');
        }

        function closeCelebration() {
            document.getElementById('celebrationModal').classList.add('hidden');
            document.getElementById('celebrationModal').classList.remove('flex');
        }

        function resetAll() {
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            completedTasks = 0;
            totalStickers = 0;
            totalJigsaws = 0;
            currentMilestoneIndex = 0;
            currentTask = null;
            timeRemaining = 3600;
            
            // ‡∏´‡∏¢‡∏∏‡∏î‡∏à‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï UI
            document.getElementById('completedCount').textContent = '0';
            document.getElementById('stickerCount').textContent = '0';
            document.getElementById('totalJigsawCount').textContent = '0';
            document.getElementById('timeRemaining').textContent = '60:00';
            document.getElementById('taskEmoji').textContent = 'üé≤';
            document.getElementById('currentTaskText').textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏∏‡πà‡∏°‡∏á‡∏≤‡∏ô...';
            document.getElementById('accuracyDisplay').style.display = 'none';
            document.getElementById('rewardDisplay').innerHTML = '‡∏£‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡πÄ‡∏™‡∏£‡πá‡∏à...';
            document.getElementById('hourlyProgress').style.width = '0%';
            document.getElementById('nextMilestone').textContent = '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏±‡∏î‡πÑ‡∏õ: 3 ‡∏á‡∏≤‡∏ô';
            
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏õ‡∏∏‡πà‡∏°
            document.getElementById('practiceBtn').style.display = 'none';
            document.getElementById('completeBtn').style.display = 'none';
            document.getElementById('nextTaskBtn').style.display = 'none';
            
            // ‡∏õ‡∏¥‡∏î modal ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà
            const modals = document.querySelectorAll('.fixed.inset-0');
            modals.forEach(modal => {
                if (modal.id !== 'celebrationModal') {
                    modal.remove();
                }
            });
            
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
            startTimer();
            setTimeout(() => {
                randomTask();
            }, 500);
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9733513bf6f4445e',t:'MTc1NTg3NTY0MC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
